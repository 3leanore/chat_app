<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="google-signin-client_id" content="1066093657510-ubj4ou274seip5fithpv10jnoof4b6it.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <title>chat_app</title>
    <link rel="stylesheet" href="/static/css/main.css">
  </head>
  <body>
    <!-- <div class="g-signin2" data-onsuccess="onSignIn"></div>
    <a href="#" onclick="signOut();">Sign out</a> -->

    <section id="messageWindow"></section>

    <script src="/socket.io/socket.io.js"></script>
    <script src="static/js/react.js"></script>
    <script src="static/js/react-dom.js"></script>
    <script src="static/js/bundle.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
      var socket = io();

      // $('#m').keydown(function() {
      //
      //   if($('#messages>li:last-of-type').text() !== 'User is typing') {
      //     socket.emit('user typing');
      //   }
      //
      // });

      // socket.on('user typing', function(){
      //
      //   $('#messages').append($('<li>').text('User is typing'));
      //
      // });

      //Google sign in
      // function onSignIn(googleUser) {
      //   var profile = googleUser.getBasicProfile();
      //   console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
      //   console.log('Name: ' + profile.getName());
      //   console.log('Image URL: ' + profile.getImageUrl());
      //   console.log('Email: ' + profile.getEmail());
      // }
      //
      // // Google sign out
      // function signOut() {
      //   var auth2 = gapi.auth2.getAuthInstance();
      //   auth2.signOut().then(function () {
      //     console.log('User signed out.');
      //   });
      // }

      function getPosition(el) {
        var xPos = 0;
        var yPos = 0;

        while (el) {
          if (el.tagName == "BODY") {
            // deal with browser quirks with body/window/document and page scroll
            var xScroll = el.scrollLeft || document.documentElement.scrollLeft;
            var yScroll = el.scrollTop || document.documentElement.scrollTop;

            xPos += (el.offsetLeft - xScroll + el.clientLeft);
            yPos += (el.offsetTop - yScroll + el.clientTop);
          } else {
            // for all other non-BODY elements
            xPos += (el.offsetLeft - el.scrollLeft + el.clientLeft);
            yPos += (el.offsetTop - el.scrollTop + el.clientTop);
          }

          el = el.offsetParent;
        }
        return {
          x: xPos,
          y: yPos
        };
      }

function offset(el) {
    var rect = el.getBoundingClientRect(),
    scrollLeft = window.pageXOffset || document.documentElement.scrollLeft,
    scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    return { top: rect.top + scrollTop, left: rect.left + scrollLeft }
}

window.addEventListener('scroll', function(){
  console.log(offset(document.querySelector('.messageForm')));
});

// window.addEventListener('scroll', function(){
//   console.log(getPosition(document.querySelector('.messageForm')));
// });


    </script>

  </body>
</html>
